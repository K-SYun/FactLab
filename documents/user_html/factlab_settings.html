<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>설정 - FactLab</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            font-size: 12px;
        }
        
        .header {
            background-color: white;
            border-bottom: 1px solid #ddd;
            padding: 8px 0;
        }
        
        .header-content {
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
        }
        
        .logo {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            text-decoration: none;
        }
        
        .nav-menu {
            display: flex;
            gap: 15px;
        }
        
        .nav-menu a {
            color: #333;
            text-decoration: none;
            font-size: 12px;
        }
        
        .container {
            max-width: 800px;
            margin: 10px auto;
            background-color: white;
            border: 1px solid #ddd;
        }
        
        .page-header {
            background-color: #f8f8f8;
            border-bottom: 1px solid #ddd;
            padding: 10px 15px;
            font-size: 13px;
            font-weight: bold;
        }
        
        .settings-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            background-color: #f8f8f8;
        }
        
        .settings-tab {
            padding: 8px 15px;
            border-right: 1px solid #ddd;
            background-color: #f8f8f8;
            color: #333;
            text-decoration: none;
            font-size: 11px;
            cursor: pointer;
        }
        
        .settings-tab.active {
            background-color: white;
            font-weight: bold;
        }
        
        .settings-tab:hover {
            background-color: #e8e8e8;
        }
        
        .settings-content {
            padding: 20px;
        }
        
        .settings-section {
            display: none;
        }
        
        .settings-section.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }
        
        .form-label {
            display: block;
            font-size: 12px;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .form-input {
            width: 100%;
            max-width: 300px;
            padding: 5px;
            border: 1px solid #ccc;
            font-size: 11px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #0066cc;
        }
        
        .form-select {
            padding: 5px;
            border: 1px solid #ccc;
            font-size: 11px;
            background-color: white;
            min-width: 120px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .checkbox-item input {
            margin-right: 5px;
        }
        
        .checkbox-item label {
            font-size: 11px;
            line-height: 1.3;
        }
        
        .help-text {
            font-size: 10px;
            color: #666;
            margin-top: 3px;
            line-height: 1.2;
        }
        
        .btn {
            padding: 5px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            color: #333;
            font-size: 11px;
            cursor: pointer;
            text-decoration: none;
            margin-right: 5px;
        }
        
        .btn:hover {
            background-color: #e0e0e0;
        }
        
        .btn-primary {
            background-color: #0066cc;
            color: white;
            border-color: #0066cc;
        }
        
        .btn-danger {
            background-color: #cc0000;
            color: white;
            border-color: #cc0000;
        }
        
        .warning-box {
            background-color: #fff8dc;
            border: 1px solid #ffcc00;
            padding: 10px;
            margin: 10px 0;
            font-size: 11px;
        }
        
        .danger-box {
            background-color: #ffe6e6;
            border: 1px solid #ff9999;
            padding: 10px;
            margin: 10px 0;
            font-size: 11px;
        }
        
        .settings-footer {
            padding: 15px;
            background-color: #f8f8f8;
            border-top: 1px solid #ddd;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 5px;
            }
            
            .settings-tabs {
                flex-wrap: wrap;
            }
            
            .form-input {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <a href="index.html" class="logo">FactLab</a>
            <div class="nav-menu">
                <a href="index.html">홈</a>
                <a href="board_list.html">게시판</a>
                <a href="news_feed.html">뉴스</a>
                <a href="mypage.html">마이페이지</a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            ⚙️ 설정
        </div>
        
        <!-- Settings Tabs -->
        <div class="settings-tabs">
            <div class="settings-tab active" data-section="notification">알림설정</div>
            <div class="settings-tab" data-section="privacy">개인정보</div>
            <div class="settings-tab" data-section="display">화면설정</div>
            <div class="settings-tab" data-section="account">계정보안</div>
            <div class="settings-tab" data-section="data">데이터관리</div>
        </div>
        
        <!-- Settings Content -->
        <div class="settings-content">
            <!-- Notification Settings -->
            <div class="settings-section active" id="notification">
                <div class="form-group">
                    <div class="form-label">이메일 알림</div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="emailNotifications" checked>
                        <label for="emailNotifications">이메일 알림 받기</label>
                    </div>
                    <div style="margin-left: 15px;">
                        <div class="checkbox-item">
                            <input type="checkbox" id="emailComments" checked>
                            <label for="emailComments">댓글 알림</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="emailVotes">
                            <label for="emailVotes">투표 및 추천 알림</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="emailNews" checked>
                            <label for="emailNews">관심 키워드 뉴스 알림</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="emailSystem" checked>
                            <label for="emailSystem">시스템 공지사항</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <div class="form-label">푸시 알림</div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pushNotifications">
                        <label for="pushNotifications">브라우저 푸시 알림 받기</label>
                    </div>
                    <div class="help-text">브라우저가 닫혀있을 때도 실시간 알림을 받을 수 있습니다.</div>
                </div>
                
                <div class="form-group">
                    <div class="form-label">알림 빈도</div>
                    <select class="form-select" id="notificationFrequency">
                        <option value="realtime">실시간</option>
                        <option value="hourly">1시간마다</option>
                        <option value="daily" selected>하루 1회</option>
                        <option value="weekly">주 1회</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="form-label">관심 키워드</div>
                    <input type="text" class="form-input" id="keywords" placeholder="AI, 경제정책, 환경 (쉼표로 구분)">
                    <div class="help-text">설정한 키워드와 관련된 뉴스가 등록되면 알림을 받습니다.</div>
                </div>
            </div>
            
            <!-- Privacy Settings -->
            <div class="settings-section" id="privacy">
                <div class="form-group">
                    <div class="form-label">프로필 공개 설정</div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="publicProfile" checked>
                        <label for="publicProfile">다른 사용자에게 프로필 공개</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="showActivity">
                        <label for="showActivity">활동 내역 공개 (작성글, 댓글)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="showLevel" checked>
                        <label for="showLevel">레벨 및 활동 점수 공개</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <div class="form-label">데이터 수집 동의</div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="analytics" checked>
                        <label for="analytics">서비스 개선을 위한 사용 통계 수집 동의</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="marketing">
                        <label for="marketing">마케팅 목적의 개인정보 이용 동의</label>
                    </div>
                    <div class="help-text">언제든지 동의를 철회할 수 있습니다.</div>
                </div>
                
                <div class="form-group">
                    <div class="form-label">검색 엔진 노출</div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="searchEngine">
                        <label for="searchEngine">검색 엔진에서 내 게시글 검색 허용</label>
                    </div>
                    <div class="help-text">체크 해제 시 검색 엔진에서 회원님의 게시글을 찾을 수 없습니다.</div>
                </div>
            </div>
            
            <!-- Display Settings -->
            <div class="settings-section" id="display">
                <div class="form-group">
                    <div class="form-label">테마 설정</div>
                    <select class="form-select" id="theme">
                        <option value="light" selected>라이트 모드</option>
                        <option value="dark">다크 모드</option>
                        <option value="auto">시스템 설정 따름</option>
                    </select>
                    <div class="help-text">어두운 환경에서는 다크 모드를 권장합니다.</div>
                </div>
                
                <div class="form-group">
                    <div class="form-label">글꼴 크기</div>
                    <select class="form-select" id="fontSize">
                        <option value="small">작게 (11px)</option>
                        <option value="medium" selected>보통 (12px)</option>
                        <option value="large">크게 (14px)</option>
                        <option value="extra-large">매우 크게 (16px)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="form-label">페이지당 게시글 수</div>
                    <select class="form-select" id="postsPerPage">
                        <option value="10">10개</option>
                        <option value="20" selected>20개</option>
                        <option value="30">30개</option>
                        <option value="50">50개</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="form-label">이미지 설정</div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="autoLoadImages" checked>
                        <label for="autoLoadImages">이미지 자동 로딩</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="showThumbnails" checked>
                        <label for="showThumbnails">게시글 목록에서 썸네일 표시</label>
                    </div>
                    <div class="help-text">데이터 사용량을 줄이려면 체크를 해제하세요.</div>
                </div>
            </div>
            
            <!-- Account Security -->
            <div class="settings-section" id="account">
                <div class="form-group">
                    <div class="form-label">비밀번호 변경</div>
                    <input type="password" class="form-input" placeholder="현재 비밀번호" style="margin-bottom: 5px;">
                    <input type="password" class="form-input" placeholder="새 비밀번호" style="margin-bottom: 5px;">
                    <input type="password" class="form-input" placeholder="새 비밀번호 확인">
                    <div class="help-text">8자 이상, 영문/숫자/특수문자 조합을 권장합니다.</div>
                    <button class="btn btn-primary" style="margin-top: 5px;">비밀번호 변경</button>
                </div>
                
                <div class="form-group">
                    <div class="form-label">로그인 보안</div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="twoFactor">
                        <label for="twoFactor">2단계 인증 사용</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="loginNotification" checked>
                        <label for="loginNotification">새로운 기기에서 로그인 시 이메일 알림</label>
                    </div>
                    <div class="help-text">계정 보안을 위해 2단계 인증을 활성화하는 것을 권장합니다.</div>
                </div>
                
                <div class="form-group">
                    <div class="form-label">활성 세션</div>
                    <div style="background-color: white; padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                        <div style="margin-bottom: 3px;">
                            <strong>현재 세션:</strong> Windows Chrome (현재 기기)
                        </div>
                        <div style="margin-bottom: 3px;">
                            <strong>모바일:</strong> Android Chrome (2시간 전)
                            <button class="btn" style="margin-left: 5px; padding: 2px 5px; font-size: 9px;">종료</button>
                        </div>
                    </div>
                    <button class="btn" style="margin-top: 5px;">모든 다른 세션 종료</button>
                </div>
            </div>
            
            <!-- Data Management -->
            <div class="settings-section" id="data">
                <div class="warning-box">
                    <strong>⚠️ 주의사항:</strong> 데이터 삭제 작업은 되돌릴 수 없습니다. 신중히 결정해주세요.
                </div>
                
                <div class="form-group">
                    <div class="form-label">내 데이터 다운로드</div>
                    <p style="margin-bottom: 8px; font-size: 11px;">
                        작성한 게시글, 댓글, 투표 기록 등 개인 데이터를 다운로드할 수 있습니다.
                    </p>
                    <button class="btn btn-primary" onclick="downloadData()">데이터 다운로드 요청</button>
                </div>
                
                <div class="form-group">
                    <div class="form-label">기록 삭제</div>
                    <button class="btn" onclick="clearSearchHistory()">검색 기록 삭제</button>
                    <button class="btn" onclick="clearActivityHistory()">활동 기록 삭제</button>
                    <div class="help-text">검색 기록, 조회 기록 등을 삭제합니다. (게시글/댓글은 제외)</div>
                </div>
                
                <div class="danger-box">
                    <strong>🚨 계정 삭제</strong><br>
                    계정을 삭제하면 모든 데이터가 영구적으로 삭제되며 복구할 수 없습니다.
                    작성한 게시글과 댓글은 '탈퇴한 사용자'로 표시됩니다.<br>
                    <button class="btn btn-danger" onclick="deleteAccount()" style="margin-top: 5px;">계정 삭제</button>
                </div>
            </div>
        </div>
        
        <!-- Settings Footer -->
        <div class="settings-footer">
            <button class="btn btn-primary" onclick="saveSettings()">설정 저장</button>
            <button class="btn" onclick="resetSettings()">기본값으로 복원</button>
            <button class="btn" onclick="goBack()">취소</button>
        </div>
    </div>

    <script>
        // 탭 전환 기능
        document.querySelectorAll('.settings-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // 탭 활성화
                document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // 섹션 표시
                const section = this.dataset.section;
                document.querySelectorAll('.settings-section').forEach(s => s.classList.remove('active'));
                document.getElementById(section).classList.add('active');
            });
        });
        
        // 설정 저장
        function saveSettings() {
            const settings = {
                notifications: {
                    email: document.getElementById('emailNotifications').checked,
                    push: document.getElementById('pushNotifications').checked,
                    frequency: document.getElementById('notificationFrequency').value,
                    keywords: document.getElementById('keywords').value,
                    emailComments: document.getElementById('emailComments').checked,
                    emailVotes: document.getElementById('emailVotes').checked,
                    emailNews: document.getElementById('emailNews').checked,
                    emailSystem: document.getElementById('emailSystem').checked
                },
                privacy: {
                    publicProfile: document.getElementById('publicProfile').checked,
                    showActivity: document.getElementById('showActivity').checked,
                    showLevel: document.getElementById('showLevel').checked,
                    analytics: document.getElementById('analytics').checked,
                    marketing: document.getElementById('marketing').checked,
                    searchEngine: document.getElementById('searchEngine').checked
                },
                display: {
                    theme: document.getElementById('theme').value,
                    fontSize: document.getElementById('fontSize').value,
                    postsPerPage: document.getElementById('postsPerPage').value,
                    autoLoadImages: document.getElementById('autoLoadImages').checked,
                    showThumbnails: document.getElementById('showThumbnails').checked
                },
                account: {
                    twoFactor: document.getElementById('twoFactor').checked,
                    loginNotification: document.getElementById('loginNotification').checked
                }
            };
            
            console.log('설정 저장:', settings);
            alert('설정이 저장되었습니다.');
            
            // 설정 즉시 적용
            applySettings(settings);
        }
        
        // 설정 적용
        function applySettings(settings) {
            // 테마 적용
            if (settings.display.theme === 'dark') {
                document.body.style.backgroundColor = '#2c2c2c';
                document.body.style.color = '#ffffff';
            } else {
                document.body.style.backgroundColor = '#f5f5f5';
                document.body.style.color = '#333';
            }
            
            // 글꼴 크기 적용
            const fontSizes = {
                'small': '11px',
                'medium': '12px',
                'large': '14px',
                'extra-large': '16px'
            };
            document.body.style.fontSize = fontSizes[settings.display.fontSize] || '12px';
        }
        
        // 기본값 복원
        function resetSettings() {
            if (confirm('모든 설정을 기본값으로 복원하시겠습니까?')) {
                // 알림 설정 기본값
                document.getElementById('emailNotifications').checked = true;
                document.getElementById('pushNotifications').checked = false;
                document.getElementById('notificationFrequency').value = 'daily';
                document.getElementById('keywords').value = '';
                document.getElementById('emailComments').checked = true;
                document.getElementById('emailVotes').checked = false;
                document.getElementById('emailNews').checked = true;
                document.getElementById('emailSystem').checked = true;
                
                // 개인정보 설정 기본값
                document.getElementById('publicProfile').checked = true;
                document.getElementById('showActivity').checked = false;
                document.getElementById('showLevel').checked = true;
                document.getElementById('analytics').checked = true;
                document.getElementById('marketing').checked = false;
                document.getElementById('searchEngine').checked = false;
                
                // 화면 설정 기본값
                document.getElementById('theme').value = 'light';
                document.getElementById('fontSize').value = 'medium';
                document.getElementById('postsPerPage').value = '20';
                document.getElementById('autoLoadImages').checked = true;
                document.getElementById('showThumbnails').checked = true;
                
                // 계정 보안 기본값
                document.getElementById('twoFactor').checked = false;
                document.getElementById('loginNotification').checked = true;
                
                alert('설정이 기본값으로 복원되었습니다.');
            }
        }
        
        // 데이터 다운로드
        function downloadData() {
            if (confirm('개인 데이터를 다운로드하시겠습니까? 처리에 시간이 걸릴 수 있습니다.')) {
                alert('데이터 다운로드 요청이 접수되었습니다. 준비가 완료되면 이메일로 안내드리겠습니다.');
            }
        }
        
        // 검색 기록 삭제
        function clearSearchHistory() {
            if (confirm('검색 기록을 모두 삭제하시겠습니까?')) {
                alert('검색 기록이 삭제되었습니다.');
            }
        }
        
        // 활동 기록 삭제
        function clearActivityHistory() {
            if (confirm('활동 기록을 모두 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                alert('활동 기록이 삭제되었습니다.');
            }
        }
        
        // 계정 삭제
        function deleteAccount() {
            const confirmation = prompt('계정을 삭제하려면 "계정삭제"를 입력하세요:');
            if (confirmation === '계정삭제') {
                if (confirm('정말로 계정을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                    alert('계정 삭제 요청이 접수되었습니다. 24시간 후에 계정이 영구 삭제됩니다.');
                }
            } else if (confirmation !== null) {
                alert('입력이 올바르지 않습니다.');
            }
        }
        
        // 취소
        function goBack() {
            if (confirm('설정 변경을 취소하시겠습니까?')) {
                window.location.href = 'mypage.html';
            }
        }
        
        // 푸시 알림 권한 요청
        document.getElementById('pushNotifications').addEventListener('change', function() {
            if (this.checked) {
                if ('Notification' in window) {
                    Notification.requestPermission().then(permission => {
                        if (permission !== 'granted') {
                            this.checked = false;
                            alert('브라우저에서 알림 권한을 허용해주세요.');
                        }
                    });
                } else {
                    this.checked = false;
                    alert('이 브라우저는 푸시 알림을 지원하지 않습니다.');
                }
            }
        });
        
        // 2단계 인증 활성화
        document.getElementById('twoFactor').addEventListener('change', function() {
            if (this.checked) {
                if (confirm('2단계 인증을 활성화하시겠습니까? 휴대폰 번호 인증이 필요합니다.')) {
                    alert('2단계 인증 설정 페이지로 이동합니다.');
                } else {
                    this.checked = false;
                }
            }
        });
        
        // 실시간 테마 적용
        document.getElementById('theme').addEventListener('change', function() {
            const theme = this.value;
            if (theme === 'dark') {
                document.body.style.backgroundColor = '#2c2c2c';
                document.body.style.color = '#ffffff';
            } else if (theme === 'auto') {
                const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                if (isDark) {
                    document.body.style.backgroundColor = '#2c2c2c';
                    document.body.style.color = '#ffffff';
                } else {
                    document.body.style.backgroundColor = '#f5f5f5';
                    document.body.style.color = '#333';
                }
            } else {
                document.body.style.backgroundColor = '#f5f5f5';
                document.body.style.color = '#333';
            }
        });
        
        // 실시간 글꼴 크기 적용
        document.getElementById('fontSize').addEventListener('change', function() {
            const fontSizes = {
                'small': '11px',
                'medium': '12px',
                'large': '14px',
                'extra-large': '16px'
            };
            document.body.style.fontSize = fontSizes[this.value] || '12px';
        });
    </script>
</body>
</html>