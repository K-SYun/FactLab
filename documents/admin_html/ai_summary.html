<!-- AI 요약 관리 페이지 -->
<main class="p-6 ml-64">
    <!-- 페이지 헤더 -->
    <div class="mb-8">
        <h1 class="text-2xl font-bold text-gray-900">AI 요약 관리</h1>
        <p class="text-gray-600 mt-2">AI 기반 뉴스 요약 및 자동 콘텐츠 생성 관리</p>
    </div>

    <!-- AI 엔진 상태 -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="stat-card blue rounded-lg p-6 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-sm">오늘 처리</p>
                    <p class="text-2xl font-bold" id="todayProcessed">1,423</p>
                    <p class="text-white/80 text-xs mt-1">
                        <i class="fas fa-robot mr-1"></i>
                        평균 1.2초/건
                    </p>
                </div>
                <div class="bg-white/20 p-3 rounded-full">
                    <i class="fas fa-brain text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="stat-card green rounded-lg p-6 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-sm">성공률</p>
                    <p class="text-2xl font-bold" id="successRate">97.6%</p>
                    <p class="text-white/80 text-xs mt-1">
                        <i class="fas fa-check mr-1"></i>
                        품질 점수 4.8/5.0
                    </p>
                </div>
                <div class="bg-white/20 p-3 rounded-full">
                    <i class="fas fa-award text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="stat-card orange rounded-lg p-6 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-sm">대기 중</p>
                    <p class="text-2xl font-bold" id="pendingCount">23</p>
                    <p class="text-white/80 text-xs mt-1">
                        <i class="fas fa-clock mr-1"></i>
                        예상 완료: 28분
                    </p>
                </div>
                <div class="bg-white/20 p-3 rounded-full">
                    <i class="fas fa-hourglass-half text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="stat-card purple rounded-lg p-6 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-sm">API 사용량</p>
                    <p class="text-2xl font-bold" id="apiUsage">78%</p>
                    <p class="text-white/80 text-xs mt-1">
                        <i class="fas fa-chart-pie mr-1"></i>
                        일일 한도 대비
                    </p>
                </div>
                <div class="bg-white/20 p-3 rounded-full">
                    <i class="fas fa-tachometer-alt text-2xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- AI 엔진 모니터링 및 설정 -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- AI 엔진 상태 -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">AI 엔진 상태</h3>
            <div class="space-y-4">
                <!-- ChatGPT API -->
                <div class="flex items-center justify-between p-4 bg-green-50 rounded-lg">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-comments text-green-600"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-green-900">ChatGPT API</h4>
                            <p class="text-sm text-green-700">응답시간: 1.2초 | 품질: 4.8/5.0</p>
                        </div>
                    </div>
                    <span class="status-badge completed">정상</span>
                </div>

                <!-- KoBERT -->
                <div class="flex items-center justify-between p-4 bg-blue-50 rounded-lg">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-language text-blue-600"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-blue-900">KoBERT 분석</h4>
                            <p class="text-sm text-blue-700">감정분석: 활성 | 키워드추출: 활성</p>
                        </div>
                    </div>
                    <span class="status-badge completed">정상</span>
                </div>

                <!-- TF-IDF 클러스터링 -->
                <div class="flex items-center justify-between p-4 bg-purple-50 rounded-lg">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-project-diagram text-purple-600"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-purple-900">TF-IDF 클러스터링</h4>
                            <p class="text-sm text-purple-700">처리속도: 0.3초/기사 | 정확도: 92%</p>
                        </div>
                    </div>
                    <span class="status-badge completed">정상</span>
                </div>

                <!-- 제어 버튼 -->
                <div class="grid grid-cols-2 gap-3 pt-4">
                    <button class="btn-primary" onclick="runBatchSummary()">
                        <i class="fas fa-play mr-2"></i>
                        일괄 처리 시작
                    </button>
                    <button class="btn-secondary" onclick="pauseAIProcessing()">
                        <i class="fas fa-pause mr-2"></i>
                        처리 일시정지
                    </button>
                </div>
            </div>
        </div>

        <!-- 실시간 처리 현황 -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">실시간 처리 로그</h3>
            <div class="space-y-2 h-80 overflow-y-auto custom-scrollbar">
                <div class="text-xs text-gray-600 bg-green-50 p-3 rounded border-l-4 border-green-400">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-medium text-green-800">요약 완료</span>
                        <span class="text-green-600">[14:23:45]</span>
                    </div>
                    <p class="text-green-700">"대통령 부동산 정책 발표..." (1.1초)</p>
                    <div class="mt-1 text-green-600">✓ 키워드: 부동산, 정책, 규제완화</div>
                </div>
                
                <div class="text-xs text-gray-600 bg-blue-50 p-3 rounded border-l-4 border-blue-400">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-medium text-blue-800">처리 중</span>
                        <span class="text-blue-600">[14:23:12]</span>
                    </div>
                    <p class="text-blue-700">"AI 기술 발전, 일자리 영향..." (처리중)</p>
                    <div class="mt-1 text-blue-600">⏳ 예상 완료: 30초 후</div>
                </div>
                
                <div class="text-xs text-gray-600 bg-green-50 p-3 rounded border-l-4 border-green-400">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-medium text-green-800">요약 완료</span>
                        <span class="text-green-600">[14:22:58]</span>
                    </div>
                    <p class="text-green-700">"코인 시장 급락, 투자자 패닉..." (0.9초)</p>
                    <div class="mt-1 text-green-600">✓ 키워드: 암호화폐, 하락, 투자</div>
                </div>
                
                <div class="text-xs text-gray-600 bg-yellow-50 p-3 rounded border-l-4 border-yellow-400">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-medium text-yellow-800">재시도 중</span>
                        <span class="text-yellow-600">[14:22:33]</span>
                    </div>
                    <p class="text-yellow-700">"연예인 열애설 루머..." (API 한도 초과)</p>
                    <div class="mt-1 text-yellow-600">🔄 3분 후 재시도 예정</div>
                </div>
                
                <div class="text-xs text-gray-600 bg-green-50 p-3 rounded border-l-4 border-green-400">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-medium text-green-800">클러스터링 완료</span>
                        <span class="text-green-600">[14:21:45]</span>
                    </div>
                    <p class="text-green-700">유사 기사 15건 그룹핑 완료</p>
                    <div class="mt-1 text-green-600">📊 대표 기사 1건 선정</div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI 설정 및 품질 관리 -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- AI 모델 설정 -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">AI 모델 설정</h3>
            <div class="space-y-4">
                <div>
                    <label class="form-label">요약 모델</label>
                    <select class="form-select" id="summaryModel">
                        <option value="gpt-4">GPT-4 (높은 품질)</option>
                        <option value="gpt-3.5" selected>GPT-3.5 Turbo (빠른 처리)</option>
                        <option value="kobert">KoBERT (한국어 특화)</option>
                    </select>
                </div>
                
                <div>
                    <label class="form-label">요약 길이</label>
                    <div class="flex items-center space-x-4">
                        <input type="range" min="50" max="200" value="100" class="flex-1" id="summaryLength">
                        <span class="text-sm text-gray-600"><span id="lengthValue">100</span>자</span>
                    </div>
                </div>
                
                <div>
                    <label class="form-label">처리 우선순위</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2" checked> 정치 뉴스 우선 처리
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2" checked> 경제 뉴스 우선 처리
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2"> 속보 즉시 처리
                        </label>
                    </div>
                </div>
                
                <div>
                    <label class="form-label">자동 질문 생성</label>
                    <select class="form-select">
                        <option value="enabled">활성 (토론 유도)</option>
                        <option value="disabled">비활성</option>
                        <option value="selective">선택적 (인기 기사만)</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 품질 모니터링 -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">품질 모니터링</h3>
            <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-medium text-gray-800 mb-2">평균 품질 점수</h4>
                    <div class="flex items-center space-x-2">
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 88%"></div>
                        </div>
                        <span class="text-sm font-medium">4.4/5.0</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-600">95.2%</div>
                        <div class="text-sm text-gray-600">정확도</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-600">92.8%</div>
                        <div class="text-sm text-gray-600">완성도</div>
                    </div>
                </div>
                
                <div class="border-t pt-4">
                    <h4 class="font-medium text-gray-800 mb-2">최근 사용자 피드백</h4>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-600">매우 유용함</span>
                            <span class="text-green-600">67%</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-600">유용함</span>
                            <span class="text-blue-600">28%</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-600">개선 필요</span>
                            <span class="text-yellow-600">5%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 처리 대기열 및 결과 -->
    <div class="bg-white rounded-lg shadow-sm">
        <div class="px-6 py-4 border-b border-gray-200">
            <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-gray-800">처리 대기열 & 최근 결과</h3>
                <div class="flex items-center space-x-3">
                    <button class="btn-secondary" onclick="clearQueue()">
                        <i class="fas fa-trash mr-2"></i>
                        대기열 비우기
                    </button>
                    <button class="btn-primary" onclick="processAll()">
                        <i class="fas fa-play-circle mr-2"></i>
                        전체 처리
                    </button>
                </div>
            </div>
        </div>
        
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">뉴스 제목</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">소스</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">상태</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">처리 시간</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">품질 점수</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">액션</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <tr class="table-row">
                        <td class="px-6 py-4">
                            <div class="text-sm font-medium text-gray-900">대통령, 부동산 정책 발표... 시장 반응은?</div>
                            <div class="text-sm text-gray-500 mt-1">
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">요약완료</span>
                                <span class="ml-2 text-gray-400">부동산, 정책, 규제완화</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-900">네이버 뉴스</td>
                        <td class="px-6 py-4">
                            <span class="status-badge completed">완료</span>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-900">1.1초</td>
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <span class="text-sm font-medium text-green-600">4.8</span>
                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-1">
                                    <div class="bg-green-500 h-1 rounded-full" style="width: 96%"></div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm font-medium">
                            <button class="text-indigo-600 hover:text-indigo-900 mr-3" onclick="viewSummary('news-1')">보기</button>
                            <button class="text-yellow-600 hover:text-yellow-900" onclick="editSummary('news-1')">수정</button>
                        </td>
                    </tr>
                    <tr class="table-row">
                        <td class="px-6 py-4">
                            <div class="text-sm font-medium text-gray-900">AI 기술 발전, 일자리에 미치는 영향은</div>
                            <div class="text-sm text-gray-500 mt-1">
                                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">처리중</span>
                                <div class="w-24 bg-gray-200 rounded-full h-1 mt-1">
                                    <div class="bg-yellow-500 h-1 rounded-full animate-pulse" style="width: 65%"></div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-900">다음 뉴스</td>
                        <td class="px-6 py-4">
                            <span class="status-badge reviewing">처리중</span>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-500">30초 예상</td>
                        <td class="px-6 py-4 text-sm text-gray-500">-</td>
                        <td class="px-6 py-4 text-sm font-medium">
                            <button class="text-red-600 hover:text-red-900" onclick="cancelProcessing('news-2')">취소</button>
                        </td>
                    </tr>
                    <tr class="table-row">
                        <td class="px-6 py-4">
                            <div class="text-sm font-medium text-gray-900">코인 시장 급락, 투자자들 패닉 상태</div>
                            <div class="text-sm text-gray-500 mt-1">
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">요약완료</span>
                                <span class="ml-2 text-gray-400">암호화폐, 하락, 투자</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-900">트위터</td>
                        <td class="px-6 py-4">
                            <span class="status-badge completed">완료</span>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-900">0.9초</td>
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <span class="text-sm font-medium text-green-600">4.6</span>
                                <div class="ml-2 w-16 bg-gray-200 rounded-full h-1">
                                    <div class="bg-green-500 h-1 rounded-full" style="width: 92%"></div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm font-medium">
                            <button class="text-indigo-600 hover:text-indigo-900 mr-3" onclick="viewSummary('news-3')">보기</button>
                            <button class="text-yellow-600 hover:text-yellow-900" onclick="editSummary('news-3')">수정</button>
                        </td>
                    </tr>
                    <tr class="table-row">
                        <td class="px-6 py-4">
                            <div class="text-sm font-medium text-gray-500">연예인 열애설 루머 확산</div>
                            <div class="text-sm text-gray-500 mt-1">
                                <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded">API 한도 초과</span>
                                <span class="ml-2 text-gray-400">3분 후 재시도</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-500">스포츠조선</td>
                        <td class="px-6 py-4">
                            <span class="status-badge false">대기</span>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-500">-</td>
                        <td class="px-6 py-4 text-sm text-gray-500">-</td>
                        <td class="px-6 py-4 text-sm font-medium">
                            <button class="text-blue-600 hover:text-blue-900 mr-3" onclick="retryProcessing('news-4')">재시도</button>
                            <button class="text-red-600 hover:text-red-900" onclick="skipProcessing('news-4')">건너뛰기</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</main>

<script>
// AI 요약 관리 관련 JavaScript 함수들
function runBatchSummary() {
    showNotification('일괄 AI 요약 처리를 시작합니다...', 'info');
    
    // 처리 상태 업데이트 시뮬레이션
    let processed = 0;
    const total = 23;
    
    const interval = setInterval(() => {
        processed++;
        const percentage = Math.round((processed / total) * 100);
        
        if (processed < total) {
            showNotification(`AI 요약 진행 중... ${processed}/${total}건 (${percentage}%)`, 'info', 1000);
        } else {
            clearInterval(interval);
            showNotification('일괄 AI 요약 처리가 완료되었습니다.', 'success');
            updatePendingCount(0);
        }
    }, 500);
}

function pauseAIProcessing() {
    showNotification('AI 처리를 일시정지합니다.', 'warning');
    // API 호출 로직
}

function clearQueue() {
    if (confirm('대기열의 모든 항목을 삭제하시겠습니까?')) {
        showNotification('대기열을 비우고 있습니다...', 'warning');
        setTimeout(() => {
            showNotification('대기열이 비워졌습니다.', 'success');
            updatePendingCount(0);
        }, 1000);
    }
}

function processAll() {
    runBatchSummary();
}

function viewSummary(newsId) {
    // 요약 결과 모달 표시
    showModalDialog('AI 요약 결과', getSummaryModalContent(newsId));
}

function editSummary(newsId) {
    showNotification(`요약 수정 모드로 전환합니다. (ID: ${newsId})`, 'info');
    // 수정 인터페이스 표시
}

function cancelProcessing(newsId) {
    showNotification('처리를 취소하고 있습니다...', 'warning');
    setTimeout(() => {
        showNotification('처리가 취소되었습니다.', 'success');
    }, 1000);
}

function retryProcessing(newsId) {
    showNotification('재시도 중입니다...', 'info');
    setTimeout(() => {
        showNotification('처리가 시작되었습니다.', 'success');
    }, 2000);
}

function skipProcessing(newsId) {
    showNotification('해당 뉴스를 건너뛰었습니다.', 'info');
}

function updatePendingCount(count) {
    const element = document.getElementById('pendingCount');
    if (element) {
        element.textContent = count.toString();
    }
}

function getSummaryModalContent(newsId) {
    return `
        <div class="space-y-4">
            <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-medium text-blue-900 mb-2">원문 제목</h4>
                <p class="text-blue-800">대통령, 부동산 정책 발표... 시장 반응은?</p>
            </div>
            
            <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-medium text-green-900 mb-2">AI 요약 (100자)</h4>
                <p class="text-green-800">정부가 부동산 규제 완화 방향을 제시했다. 전문가들은 시장 안정화 효과를 기대하지만, 일부에서는 추가 대책의 필요성을 제기하고 있다.</p>
            </div>
            
            <div class="bg-yellow-50 p-4 rounded-lg">
                <h4 class="font-medium text-yellow-900 mb-2">자동 생성 질문</h4>
                <p class="text-yellow-800">"부동산 규제 완화가 실제로 시장 안정화로 이어질까요?"</p>
            </div>
            
            <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-medium text-purple-900 mb-2">추출 키워드</h4>
                <div class="flex flex-wrap gap-2">
                    <span class="px-2 py-1 bg-purple-100 text-purple-800 text-sm rounded">부동산</span>
                    <span class="px-2 py-1 bg-purple-100 text-purple-800 text-sm rounded">정책</span>
                    <span class="px-2 py-1 bg-purple-100 text-purple-800 text-sm rounded">규제완화</span>
                </div>
            </div>
            
            <div class="flex items-center justify-between">
                <span class="text-sm text-gray-600">처리 시간: 1.1초</span>
                <span class="text-sm text-gray-600">품질 점수: 4.8/5.0</span>
            </div>
        </div>
    `;
}

// 슬라이더 값 업데이트
document.getElementById('summaryLength')?.addEventListener('input', function(e) {
    const valueElement = document.getElementById('lengthValue');
    if (valueElement) {
        valueElement.textContent = e.target.value;
    }
});

// 실시간 업데이트
setInterval(() => {
    // 통계 업데이트 시뮬레이션
    const todayProcessed = document.getElementById('todayProcessed');
    if (todayProcessed) {
        const current = parseInt(todayProcessed.textContent.replace(',', ''));
        todayProcessed.textContent = (current + Math.floor(Math.random() * 3)).toLocaleString();
    }
}, 10000);
</script>